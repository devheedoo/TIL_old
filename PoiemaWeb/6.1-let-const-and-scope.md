# 6.1 let, const and scope

> 출처: [let, const | PoiemaWeb](https://poiemaweb.com/es6-block-scope)

ES5까지 사용한 `var` 키워드의 문제점:

1. 함수 레벨 스코프
2. `var` 키워드 생략 허용
3. 변수 중복 선언 허용
4. 변수 호이스팅

## 1. let

- 중복 선언 시 SyntaxError가 발생한다.
- `let` 키워드로 선언된 변수는 선언문에 도달했을 때 초기화가 이루어진다.  (호이스팅이 발생하지 않는다.)
- `let` 키워드로 전역 변수를 사용해도 전역 객체의 프로퍼티가 아니다. (`window.foo`로 접근 불가)

> 선언 단계와 초기화 단계 사이를 **일시적 사각지대(Temporal Dead Zone; TDZ)** 라고 부른다. 일시적 사각지대 단계까지는 메모리 공간이 확보되지 않기 때문에 참조하려고 하면 ReferenceError가 발생한다.

```javascript
// 함수의 배열을 생성하는 for 루프의 i는 for 루프의 코드 블록에서만 유효한 지역 변수이면서 자유 변수이다.
for (let i = 0; i < 3; i++) {
  arr1.push(function () { console.log(i); });
}
```

## 2. const

- `const`는 반드시 선언과 동시에 할당이 이루어져야 하며, 재할당이 불가능하다.
- 상수를 정의하면 가독성이 좋아진다.
- 객체를 재할당할 수 없지만 프로퍼티는 보호되지 않는다.

## 3. var, let, const

결론적으로 세 가지 키워드를 이렇게 사용하도록 한다:

- ES6를 사용한다면 `var` 키워드는 사용하지 않는다.
- 재할당이 필요한 경우에만 `let` 키워드를 사용하고, 그 외에는 항상 `const` 키워드를 사용한다.

> 일단 `const` 키워드로 선언하고, 재할당이 필요한 경우에 `let` 키워드로 변경해도 늦지 않다.
